{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["`use strict`\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\n\nconst photoList = document.querySelector(\".listOfPhotos\");\nconst searchForm = document.querySelector(\".searchForm\");\nconst loader = document.querySelector(\".loader\");\nconst btnMore = document.querySelector(\".searchMoreImages\");\n\nloaderHide();\n\n\n\nasync function getPhoto(query, amount, page) {\n    try {\n        loaderShow();\n        const resp = await axios.get(`https://pixabay.com/api/?key=42327867-17db48a54b533eea41b085f18&q=${query}&image_type=photo&safesearch=true&page=${page}&per_page=${amount}&orientation=horizontal`);\n        loaderHide();\n        return resp.data;\n    } catch (error) {\n        console.error('Problem with request to API:', error);\n        iziToast.error({\n            title: 'Error',\n            message: 'Failed to fetch photos. Please try again later.',\n        });\n        return [];\n    }\n}\n\n\n//Added elements to page\n\nfunction addElements(photos) {\n    \n    \n    const html = photos\n    .map((photo) => {\n        return `\n        <li class =\"listElement\">\n        <a\n        class =\"largePhotoLink\"\n        href=\"${photo.largeImageURL}\">\n        <img\n        class =\"photo\"\n        src=\"${photo.previewURL}\">\n        </a>\n        <p>Likes: ${photo.likes}</p>\n        <p>Views: ${photo.views}</p>\n        <p>Comments: ${photo.comments}</p>\n        <p>Downloads: ${photo.downloads}</p>\n        </li>\n        `;\n    })\n    .join(\"\");\n    \n    photoList.insertAdjacentHTML(\"beforeend\", html);\n    \n    \n    \n    //Added simplelightbox \n    \n    \n    const gallery = new SimpleLightbox('.listElement a', {\n        docClose: false,\n    });\n    \n    gallery.refresh();\n}\n\nfunction loaderShow() {\n    \n    loader.style.display = \"block\";\n    \n}\n\nfunction loaderHide() {\n    loader.style.display = \"none\";\n}\n\nlet page = 1;\nlet currentQuery;\nlet currentHits = 0;\n\n\nfunction resetPage() {\n    photoList.innerHTML = \"\";\n}\n\n\n//Added buttons usage\n\n\nsearchForm.addEventListener(\"submit\", event => {\n    event.preventDefault();\n\n    \n    const query = event.target.elements.query.value;\n    resetPage();    \n    loaderShow()\n    setTimeout(() => {\n        getPhoto(query, 15 )\n        .then(data => {\n                if (data.hits.length !== 0) {\n                addElements(data.hits);\n                currentQuery = query;\n                page = 1;\n                currentHits += data.hits.length;\n                btnMore.style.display = \"block\";\n            } else {\n                iziToast.error({\n                    message: \"There are not any photo on your request, try type something different)\",\n                    position: \"topRight\"\n                })\n            }\n            })\n            .finally(() => {\n                loaderHide();\n                \n            })\n        },1000)\n        \n    })\n\nbtnMore.addEventListener(\"click\", event => {\n    loaderShow();\n    setTimeout(() => {\n        page++;\n        getPhoto(currentQuery, 15, page)\n            .then(data => {\n                addElements(data.hits);\n                currentHits += data.hits.length;\n                if (currentHits >= data.totalHits) {\n                    btnMore.style.display = \"none\";\n                    iziToast.info({\n                        color: \"yellow\",\n                        position: \"topRight\",\n                        message: \"You reach the end of colection, try another request)\"\n                    })\n                }\n            })\n            .finally(() => {\n                loaderHide();\n\n                let elementOfList = document.querySelector(\".listElement\");\n                elementOfList = elementOfList.getBoundingClientRect().height;\n                \n                window.scrollBy({\n                top: `${elementOfList*4}`,\n                behavior: \"smooth\"\n                }\n                )\n\n            })\n    }, 1000);\n    \n    \n})\n\n\n "],"names":["photoList","searchForm","loader","btnMore","loaderHide","getPhoto","query","amount","page","loaderShow","resp","axios","error","iziToast","addElements","photos","html","photo","SimpleLightbox","currentQuery","currentHits","resetPage","event","data","elementOfList"],"mappings":"owBAOA,MAAMA,EAAY,SAAS,cAAc,eAAe,EAClDC,EAAa,SAAS,cAAc,aAAa,EACjDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,mBAAmB,EAE1DC,IAIA,eAAeC,EAASC,EAAOC,EAAQC,EAAM,CACzC,GAAI,CACAC,IACA,MAAMC,EAAO,MAAMC,EAAM,IAAI,qEAAqEL,CAAK,0CAA0CE,CAAI,aAAaD,CAAM,yBAAyB,EACjM,OAAAH,IACOM,EAAK,IACf,OAAQE,EAAO,CACZ,eAAQ,MAAM,+BAAgCA,CAAK,EACnDC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,iDACrB,CAAS,EACM,EACV,CACL,CAKA,SAASC,EAAYC,EAAQ,CAGzB,MAAMC,EAAOD,EACZ,IAAKE,GACK;AAAA;AAAA;AAAA;AAAA,gBAICA,EAAM,aAAa;AAAA;AAAA;AAAA,eAGpBA,EAAM,UAAU;AAAA;AAAA,oBAEXA,EAAM,KAAK;AAAA,oBACXA,EAAM,KAAK;AAAA,uBACRA,EAAM,QAAQ;AAAA,wBACbA,EAAM,SAAS;AAAA;AAAA,SAGlC,EACA,KAAK,EAAE,EAERjB,EAAU,mBAAmB,YAAagB,CAAI,EAO9B,IAAIE,EAAe,iBAAkB,CACjD,SAAU,EAClB,CAAK,EAEO,QAAO,CACnB,CAEA,SAAST,GAAa,CAElBP,EAAO,MAAM,QAAU,OAE3B,CAEA,SAASE,GAAa,CAClBF,EAAO,MAAM,QAAU,MAC3B,CAEA,IAAIM,EAAO,EACPW,EACAC,EAAc,EAGlB,SAASC,GAAY,CACjBrB,EAAU,UAAY,EAC1B,CAMAC,EAAW,iBAAiB,SAAUqB,GAAS,CAC3CA,EAAM,eAAc,EAGpB,MAAMhB,EAAQgB,EAAM,OAAO,SAAS,MAAM,MAC1CD,IACAZ,EAAY,EACZ,WAAW,IAAM,CACbJ,EAASC,EAAO,EAAI,EACnB,KAAKiB,GAAQ,CACFA,EAAK,KAAK,SAAW,GACzBT,EAAYS,EAAK,IAAI,EACrBJ,EAAeb,EACfE,EAAO,EACPY,GAAeG,EAAK,KAAK,OACzBpB,EAAQ,MAAM,QAAU,SAExBU,EAAS,MAAM,CACX,QAAS,yEACT,SAAU,UAC9B,CAAiB,CAEjB,CAAa,EACA,QAAQ,IAAM,CACXT,GAEhB,CAAa,CACJ,EAAC,GAAI,CAEd,CAAK,EAELD,EAAQ,iBAAiB,QAASmB,GAAS,CACvCb,IACA,WAAW,IAAM,CACbD,IACAH,EAASc,EAAc,GAAIX,CAAI,EAC1B,KAAKe,GAAQ,CACVT,EAAYS,EAAK,IAAI,EACrBH,GAAeG,EAAK,KAAK,OACrBH,GAAeG,EAAK,YACpBpB,EAAQ,MAAM,QAAU,OACxBU,EAAS,KAAK,CACV,MAAO,SACP,SAAU,WACV,QAAS,sDACjC,CAAqB,EAErB,CAAa,EACA,QAAQ,IAAM,CACXT,IAEA,IAAIoB,EAAgB,SAAS,cAAc,cAAc,EACzDA,EAAgBA,EAAc,sBAAuB,EAAC,OAEtD,OAAO,SAAS,CAChB,IAAK,GAAGA,EAAc,CAAC,GACvB,SAAU,QACT,CACA,CAEjB,CAAa,CACR,EAAE,GAAI,CAGX,CAAC"}